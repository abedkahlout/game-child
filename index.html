<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù‡Ù…Ø© Ø§Ù„Ø¹Ø§Ù„ÙÙ…Ø© | Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ 2030</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <style>
        /* ============ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ============ */
        :root {
            --primary: #006C35;
            --primary-light: #10b981;
            --primary-dark: #004d26;
            --accent: #fbbf24;
            --secondary: #1e3a8a;
            --danger: #dc2626;
            --bg-white: #ffffff;
            --text-dark: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            color: var(--text-dark);
            height: 100vh; overflow: hidden;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        /* ============ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ============ */
        .container { width: 100%; height: 100vh; display: flex; flex-direction: column; }

        /* ============ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ============ */
    .top-bar {
    background: var(--bg-white);
    border-bottom: 2px solid var(--border);
    
    /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ù†Ø³ØªØ®Ø¯Ù… calc Ù„Ø¬Ù…Ø¹ Ù…Ø³Ø§ÙØ© 10 Ø¨ÙƒØ³Ù„ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© + Ù…Ø³Ø§ÙØ© Ø§Ù„Ø¢ÙŠÙÙˆÙ† Ø§Ù„Ø¢Ù…Ù†Ø© */
    padding-top: calc(10px + env(safe-area-inset-top));
    padding-bottom: 10px;
    padding-right: 15px;
    padding-left: 15px;
    
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    z-index: 100;
}
        .badge {
            background: #f0fdf4; padding: 6px 12px; border-radius: 20px; font-weight: 600;
            color: var(--primary); border: 1px solid var(--primary-light); font-size: 0.85rem;
            display: flex; align-items: center; gap: 5px;
        }
        .teacher-badge {
            background: #fff; color: #555; border-color: #ddd; font-size: 0.8rem;
        }
        .badge-exit { background: #fee2e2; color: var(--danger); border-color: var(--danger); cursor: pointer; transition: 0.3s; }
        .badge-exit:hover { background: #fecaca; }

        /* ============ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ============ */
        .game-area {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            justify-content: center; padding: 15px; overflow-y: auto;
        }

        /* ============ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ============ */
        .map-container {
            position: relative; width: 100%; max-width: 550px; aspect-ratio: 1;
            background: var(--bg-white); border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 4px solid #fff; overflow: hidden;
        }
        .map-image { width: 100%; height: 100%; object-fit: cover; display: block; }

        /* ============ Ø§Ù„Ø£Ø²Ø±Ø§Ø± (Ø§Ù„Ù…Ù†Ø§Ø·Ù‚) ============ */
        .region-btn {
            position: absolute; width: 45px; height: 45px; border-radius: 50%;
            cursor: pointer; border: 3px solid white; display: flex; align-items: center;
            justify-content: center; font-size: 1.2rem;
            transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 10;
        }

        /* 1. Ù…Ù‚ÙÙ„ */
        .region-btn.locked {
            background: #94a3b8; border-color: #cbd5e1; color: #e2e8f0;
        }

        /* 2. Ù†Ø´Ø· (Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ) */
        .region-btn.active {
            background: #fff; color: #b30000; border-color: #fbbf24;
            font-size: 1.4rem; animation: pulse 2s infinite; z-index: 15;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* 3. Ù…ÙƒØªÙ…Ù„ (Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨) */
        .region-btn.completed {
            background: var(--bg-white);
            border-color: var(--primary);
            color: rgb(153, 1, 1) !important; /* Ù„ÙˆÙ† Ø§Ù„Ø¯Ø¨ÙˆØ³ Ø£Ø­Ù…Ø± */
            opacity: 1;
        }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµØ­ Ø§Ù„ØµØºÙŠØ±Ø© ÙÙˆÙ‚ Ø§Ù„Ø²Ø± Ø§Ù„Ù…ÙƒØªÙ…Ù„ */
        .region-btn.completed::after {
            content: '\f00c'; /* ÙƒÙˆØ¯ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµØ­ Ù…Ù† FontAwesome */
            font-family: "Font Awesome 6 Free"; 
            font-weight: 900;
            position: absolute;
            top: -8px; right: -8px;
            width: 20px; height: 20px;
            background: #10b981; /* Ø®Ù„ÙÙŠØ© Ø®Ø¶Ø±Ø§Ø¡ */
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            font-size: 10px;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 20;
        }

        /* Ù…Ø³Ù…ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ */
        .region-label {
            position: absolute; top: 115%; left: 50%; transform: translateX(-50%);
            background: rgba(255,255,255,0.9); padding: 2px 8px; border-radius: 8px;
            font-size: 0.8rem; font-weight: bold; white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); color: #333;
            pointer-events: none; opacity: 0; transition: 0.3s; z-index: 11;
        }
        .region-btn:active .region-label, .region-btn:hover .region-label,
        .region-btn.active .region-label, .region-btn.completed .region-label { opacity: 1; }
        
        .shake { animation: shake 0.4s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* ============ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ============ */
        .progress-container {
            width: 100%; max-width: 550px; margin-top: 20px; background: var(--bg-white);
            padding: 15px; border-radius: 15px; box-shadow: var(--shadow-md); border: 1px solid var(--border);
        }
        .progress-bar { width: 100%; height: 8px; background: #e2e8f0; border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary-light)); border-radius: 10px; transition: width 0.5s; }

        /* ============ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ============ */
        .overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;
            backdrop-filter: blur(4px); padding: 20px; animation: fadeIn 0.3s;
        }
        .overlay.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .popup-box {
            background: var(--bg-white); padding: 25px; border-radius: 24px;
            width: 100%; max-width: 450px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); animation: popIn 0.4s;
            max-height: 90vh; overflow-y: auto;
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© */
        .login-title { font-size: 1.5rem; font-weight: 900; color: var(--primary); margin: 10px 0; }
        .login-subtitle {text-align: center; color: #666; margin-bottom: 5px; font-size: 0.95rem; }
        .teacher-name { color: var(--primary-dark); font-weight: bold; margin-bottom: 20px; font-size: 0.9rem; }
        
        .input-field {
            width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 12px;
            font-family: 'Cairo'; text-align: center; margin-bottom: 15px; outline: none;
        }
        .input-field:focus { border-color: var(--primary); }

        .btn {
            width: 100%; padding: 14px; border: none; border-radius: 12px;
            font-family: 'Cairo'; font-weight: 700; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 1rem;
        }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; box-shadow: 0 4px 15px rgba(0,108,53,0.3); }
        .btn-primary:hover { transform: translateY(-2px); }
        
        .btn-option { background: #f8fafc; border: 2px solid #e2e8f0; margin: 8px 0; color: var(--text-dark); text-align: right; }
        .btn-option:active { border-color: var(--primary); background: #f0fdf4; }
        .btn-option.correct { background: #dcfce7; border-color: #10b981; color: #006C35; }
        .btn-option.wrong { background: #fee2e2; border-color: #dc2626; color: #991b1b; }

        .message-box { height: 25px; margin-top: 10px; font-weight: bold; color: var(--primary); }

        /* ØªÙ†Ø³ÙŠÙ‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (Info) */
        .info-desc {
            background: #f0fdf4; padding: 15px; border-radius: 15px;
            border: 1px solid #dcfce7; color: #333; line-height: 1.8;
            margin: 15px 0; font-size: 1rem; text-align: right;
        }

        @media (max-width: 600px) {
            .region-btn { width: 40px; height: 40px; font-size: 1.1rem; }
            .login-title { font-size: 1.4rem; }
        }
        /* 3. Ù…ÙƒØªÙ…Ù„ - Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .region-btn.completed {
            background: var(--bg-white);
            border-color: #006C35;
            color: rgb(153, 1, 1) !important;
            opacity: 1; 
        }

        /* 4. Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµØ­ (Ø§Ù„ØµÙˆØ±Ø©) ÙÙˆÙ‚ Ø§Ù„Ø²Ø± Ø§Ù„Ù…ÙƒØªÙ…Ù„ */
        .region-btn.completed::after {
            content: ''; /* Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹: Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Øµ Ù„Ù†Ø¶Ø¹ Ø§Ù„ØµÙˆØ±Ø© */
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;  /* Ø­Ø¬Ù… Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØµØºÙŠØ±Ø© */
            height: 20px;
            
            /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØ±Ø© */
            background-image: url("true.png"); 
            background-size: cover; /* Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ù„Ø£ Ø§Ù„Ø¥Ø·Ø§Ø± */
            background-position: center;
            background-color: white; /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ ØªØ­Øª Ø§Ù„ØµÙˆØ±Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆØ¶ÙˆØ­ */
            
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 20;
        }

        .shake { animation: shake 0.4s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
/* --- Ø£Ù†Ù…Ø§Ø· Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ (Ø£ØµØºØ± Ù…Ù† Ø£Ùˆ ØªØ³Ø§ÙˆÙŠ 768 Ø¨ÙƒØ³Ù„) --- */
@media (max-width: 768px) {
#btn-4 {
  top: 27% !important;
  left: 18% !important;
}  #btn-2 { top: 42%; left: 34%; }
  #btn-1 { top: 38%; left: 50%; }
  #btn-3 { top: 23%; left: 56%; }
  #btn-5 { top: 59% !important; left: 64%; }
}


/* ============ ØªÙ†Ø³ÙŠÙ‚ Ù‚ØµØ© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ============ */
      /* ============ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚ØµØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª) ============ */
        .story-box {
            background: #ffffff; /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ù„Ù†Ø¸Ø§ÙØ© Ø§Ù„ØªØµÙ…ÙŠÙ… */
            border: 1px solid #e2e8f0;
            border-radius: 16px; /* Ø­ÙˆØ§Ù Ø£ÙƒØ«Ø± Ø§Ø³ØªØ¯Ø§Ø±Ø© */
            padding: 25px;       /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); /* Ø¸Ù„ Ø®ÙÙŠÙ Ø¬Ø¯Ø§Ù‹ */
            text-align: right;
        }

        .story-item {
            display: flex;           /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù†Øµ */
            align-items: flex-start; /* Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ø¹ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø·Ø± */
            gap: 15px;               /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù†Øµ */
            margin-bottom: 18px;     /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† ÙƒÙ„ Ù†Ù‚Ø·Ø© ÙˆØ§Ù„Ø£Ø®Ø±Ù‰ */
        }
        
        .story-item:last-child {
            margin-bottom: 0;
        }

        .story-icon {
            flex-shrink: 0;          /* Ù…Ù†Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ù† Ø§Ù„Ø§Ù†ÙƒÙ…Ø§Ø´ */
            width: 45px;             /* Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© */
            height: 45px;            /* Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© */
            background: #f0fdf4;     /* Ø®Ù„ÙÙŠØ© Ø®Ø¶Ø±Ø§Ø¡ ÙØ§ØªØ­Ø© Ø¬Ø¯Ø§Ù‹ */
            color: var(--primary);   /* Ù„ÙˆÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            border-radius: 50%;      /* Ø¬Ø¹Ù„Ù‡Ø§ Ø¯Ø§Ø¦Ø±ÙŠØ© */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;       /* Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            border: 1px solid #dcfce7;
        }

        .story-text {
            font-size: 1.1rem;       /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· */
            line-height: 1.6;        /* ØªØ¨Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø³Ø·Ø± Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø±ÙŠØ­Ø© */
            color: #334155;
            padding-top: 5px;        /* Ø¶Ø¨Ø· Ø¨Ø³ÙŠØ· Ù„ØªÙƒÙˆÙ† Ø¨Ù…Ø­Ø§Ø°Ø§Ø© ÙˆØ³Ø· Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
        }

        .story-highlight {
            color: var(--primary);
            font-weight: 800;
        }
        .story-box p {
            margin-bottom: 8px;
        }
        .story-highlight {
            color: var(--primary);
            font-weight: 700;
        }

        /* ============ ØªÙ†Ø³ÙŠÙ‚ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙÙˆØ² ============ */
        .winner-card {
            background: linear-gradient(to bottom right, #ffffff, #f0fdf4);
            border: 2px solid #dcfce7;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 20px rgba(0, 108, 53, 0.08);
            position: relative;
            overflow: hidden;
        }
        
        /* Ø´Ø±ÙŠØ· Ø²Ø®Ø±ÙÙŠ Ø¹Ù„ÙˆÙŠ */
        .winner-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 6px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .rank-title {
            background: var(--accent); /* Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ */
            color: #78350f;
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 800;
            font-size: 0.9rem;
            margin-top: 8px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        /* Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ù€ style */
button.badge {
    font-family: 'Cairo', sans-serif; /* Ù„Ø¶Ù…Ø§Ù† Ù†ÙØ³ Ø§Ù„Ø®Ø· */
    outline: none; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø·Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± */
    border-style: solid; /* ØªØ£ÙƒÙŠØ¯ Ù†Ù…Ø· Ø§Ù„Ø­Ø¯ÙˆØ¯ */
}
    </style>
</head>
<body>

<div class="container">
    <div class="top-bar">
        <div style="display: flex; gap: 8px; align-items: center;">
            <div class="badge" id="name-display">ğŸ‘¤ ...</div>
            <div class="badge teacher-badge"><i class="fas fa-chalkboard-teacher"></i> Ø³Ù„Ù…Ù‰ Ø§Ù„Ø´Ù…Ø±ÙŠ</div>
        </div>
<button class="badge badge-exit" onclick="resetGame()"><i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="game-area" id="game-ui" style="display: none;">
        <div class="map-container">
            <img src="map3.png" alt="Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" class="map-image">
            
            <div class="region-btn" id="btn-4" onclick="handleClick(3)" style="top: 26%; left: 23%;"> <span class="region-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</span> </div>
            <div class="region-btn" id="btn-2" onclick="handleClick(2)" style="top: 42%; left: 27%;"> <span class="region-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©</span> </div>
            <div class="region-btn" id="btn-1" onclick="handleClick(0)" style="top: 38%; left: 50%;"> <span class="region-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙˆØ³Ø·Ù‰</span> </div>
            <div class="region-btn" id="btn-3" onclick="handleClick(1)" style="top: 32%; left: 60%;"> <span class="region-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</span> </div>
            <div class="region-btn" id="btn-5" onclick="handleClick(4)" style="top: 63%; left: 51%;"> <span class="region-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©</span> </div>
        </div>

        <div class="progress-container">
            <div class="progress-label">
                <span id="progress-text">0/5</span>
                <span>Ø§Ù„ØªÙ‚Ø¯Ù…</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%;"></div>
            </div>
        </div>
        <div class="message-box" id="msg-box"></div>
    </div>
</div>
<div id="login-overlay" class="overlay active">
    <div class="popup-box">
        <h2 class="login-title">Ù…Ù‡Ù…Ø© Ø§Ù„Ø¹Ø§Ù„ÙÙ…Ø© | Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ 2030</h2>
        
       <div class="story-box">
            <div class="story-item">
                <div class="story-icon"><i class="fas fa-flag-checkered"></i></div>
                <div class="story-text">
                    ÙÙŠ Ø¥Ø·Ø§Ø± <span class="story-highlight">Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ 2030</span>ØŒ ØªÙ… Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ Ø¶Ù…Ù† Ù†Ø®Ø¨Ø© Ø§Ù„Ø¹Ø§Ù„Ù…Ø§Øª Ø§Ù„ØµØ§Ø¹Ø¯Ø§Øª Ù„Ø±Ø­Ù„Ø© Ø§Ø³ØªÙƒØ´Ø§ÙÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ù…Ù…Ù„ÙƒØ©.
                </div>
            </div>

            <div class="story-item">
                <div class="story-icon"><i class="fas fa-map-location-dot"></i></div>
                <div class="story-text">
                    ÙƒÙ„ Ù…Ù†Ø·Ù‚Ø© Ù‡ÙŠ <strong>Ù…Ø­Ø·Ø© Ù…Ø¹Ø±ÙÙŠØ©</strong>ØŒ Ø¹Ù„ÙŠÙƒÙ Ø§Ø¬ØªÙŠØ§Ø² ØªØ­Ø¯ÙŠØ§ØªÙ‡Ø§ Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­ Ù„ÙØªØ­ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©.
                </div>
            </div>

            <div class="story-item">
                <div class="story-icon"><i class="fas fa-medal"></i></div>
                <div class="story-text" style="color: var(--primary-dark); font-weight: bold;">
                    ÙƒÙ„ Ù‚Ø±Ø§Ø± Ø¹Ù„Ù…ÙŠ ØªØªØ®Ø°ÙŠÙ†Ù‡ Ø§Ù„Ø¢Ù† ÙŠØ¹ÙƒØ³ Ù…Ø¯Ù‰ Ø¬Ø§Ù‡Ø²ÙŠØªÙƒÙ Ù„Ù…ÙˆØ§ØµÙ„Ø© Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ.
                </div>
            </div>
        </div>
        <p class="teacher-name">Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ø³Ù„Ù…Ù‰ Ø§Ù„Ø´Ù…Ø±ÙŠ</p>
        
        <input type="text" id="username" class="input-field" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…ÙƒÙ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" onkeypress="if(event.key==='Enter') startGame()">
        
        <button class="btn btn-primary" onclick="startGame()">
             Ø§Ø¨Ø¯Ø¦ÙŠ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø¹Ù„Ù…ÙŠ
        </button>
    </div>
</div>
<div id="quiz-overlay" class="overlay">
    <div class="popup-box">
        <div class="quiz-header">
            <span class="hearts" id="hearts">â¤â¤â¤</span>
            <span class="quiz-title" id="quiz-title">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</span>
        </div>
        <div class="quiz-progress" id="q-progress">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 3</div>
        <div class="progress-bar">
            <div class="progress-fill" id="quiz-progress-fill" style="width: 33%;"></div>
        </div>
        <h3 class="quiz-question" id="quiz-question">...</h3>
        <div id="quiz-options"></div>
        <div class="quiz-feedback" id="quiz-feedback"></div>
    </div>
</div>
<div id="info-overlay" class="overlay">
    <div class="popup-box">
        <div style="font-size: 80px; margin-bottom: 15px; color: var(--accent);"><img src="champion.png" height="250px" width="100%" alt=""></div>

        <h3 id="congrats-title" style="color: var(--primary); font-weight: 800; margin-bottom: 10px;"></h3>

        <h2 id="info-title" style="color: var(--primary-dark); margin-bottom: 15px;"></h2>

        <div id="info-desc" class="info-desc"></div>
        <button class="btn btn-primary" onclick="closeInfoAndProceed()">Ù„Ù†Ø³ØªÙ…Ø± ÙÙŠ Ø±Ø­Ù„ØªÙ†Ø§ !</button>
    </div>
</div>

<div id="win-overlay" class="overlay">
    <div class="popup-box">
        <div style="font-size: 60px; margin-bottom: 10px; animation: pulse 1s infinite;"><img src="winner.avif" width="50%" height="150px" alt=""></div>
        
        <h2 class="win-title" style="color: var(--primary);">
            Ø£Ù„Ù Ù…Ø¨Ø±ÙˆÙƒ ÙŠØ§ <span id="winner-name-title" style="color: var(--accent);"></span>!
        </h2>
        
        <p class="win-message" style="color: #555; margin-bottom: 10px;">
            Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…ØªÙ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ø§Ù‡Ø± ! âœ¨
        </p>

        <div class="winner-card">
            <h1 id="winner-full-name" style="color: var(--primary-dark); margin: 5px 0 10px 0;"></h1>
            <div class="rank-title">Ø¹Ø§Ù„Ù…Ø© Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ âœ¨</div>
        </div>

        <p style="font-size: 0.85rem; color: #35320b; margin-bottom: 20px;">Ø¨Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ø³Ù„Ù…Ù‰ Ø§Ù„Ø´Ù…Ø±ÙŠ</p>
        
        <button class="btn btn-primary" onclick="resetGame()">Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© </button>
    </div>
</div>

<audio id="snd-correct" src="correct-choice-43861.mp3"></audio>
<audio id="snd-wrong" src="button-10.mp3"></audio>
<audio id="snd-click" src="button-20.mp3"></audio>
<audio id="snd-win" src="winner.mp3"></audio>

<script>

    /* ============ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ============ */
   /* ============ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨) ============ */
    const regions = [
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙˆØ³Ø·Ù‰",
            description: "Ù‚Ù„Ø¨ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù†Ø§Ø¨Ø¶ØŒ ØªÙ†Ø·Ù„Ù‚ Ù…Ù†Ù‡Ø§ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØªØ²Ø¯Ù‡Ø± ÙÙŠÙ‡Ø§ Ø§Ù„ØªÙ†Ù…ÙŠØ© ÙˆØ§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØ§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„ÙˆØ·Ù†ÙŠ.",
            questions: [
                { q: "Ø¹Ù†Ø¯ Ø¥Ø°Ø§Ø¨Ø© Ù…Ø±ÙƒØ¨ Ø£ÙŠÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ù…Ø§Ø¡ Ø£ØµØ¨Ø­ Ù‚Ø§Ø¯Ø±Ù‹Ø§ Ø¹Ù„Ù‰ ØªÙˆØµÙŠÙ„ Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ. Ù…Ø§ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ø£Ø¯Ù‚ Ù„Ø°Ù„ÙƒØŸ", opts: ["ØªÙƒÙˆÙ‘Ù† Ø£ÙŠÙˆÙ†Ø§Øª Ø­Ø±Ø© Ø§Ù„Ø­Ø±ÙƒØ©", "ØªØ­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø±ÙƒØ¨ Ø¥Ù„Ù‰ Ø¬Ø²ÙŠØ¦Ø§Øª Ù…ØªØ¹Ø§Ø¯Ù„Ø©", "Ø¶Ø¹Ù Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ³Ø§Ù‡Ù…ÙŠØ©", "Ø§Ø±ØªÙØ§Ø¹ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„ÙˆÙ„"], ans: 0 },
                { q: "Ø¥Ø°Ø§ Ø²Ø§Ø¯Øª Ù‚ÙˆØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© ÙÙŠ Ù…Ø§Ø¯Ø© Ù…Ø§ØŒ ÙÙ…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø© Ø§Ù†ØµÙ‡Ø§Ø±Ù‡Ø§ØŸ", opts: ["Ù„Ø§ ØªØªØºÙŠØ± Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†ØµÙ‡Ø§Ø±", "ØªÙ†Ø®ÙØ¶ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†ØµÙ‡Ø§Ø±", "ØªØªØ­ÙˆÙ„ Ø§Ù„Ù…Ø§Ø¯Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ ØºØ§Ø²", "ØªØ²Ø¯Ø§Ø¯ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†ØµÙ‡Ø§Ø±"], ans: 3 },
                { q: "ÙŠØ±ÙŠØ¯ Ø¹Ø§Ù„Ù… Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ØµÙ†Ø§Ø¹Ø© Ø¬Ø³Ù… ØµÙ„Ø¨ ÙŠØªØ­Ù…Ù„ Ø¯Ø±Ø¬Ø§Øª Ø­Ø±Ø§Ø±Ø© Ø¹Ø§Ù„ÙŠØ©. Ø£ÙŠ Ø§Ø®ØªÙŠØ§Ø± Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["Ù…Ø§Ø¯Ø© Ø¬Ø²ÙŠØ¦ÙŠØ© Ø¶Ø¹ÙŠÙØ© Ø§Ù„ØªØ±Ø§Ø¨Ø·", "Ù…Ø§Ø¯Ø© ØºÙŠØ± Ù…Ø³ØªÙ‚Ø±Ø© ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠÙ‹Ø§", "Ù…Ø§Ø¯Ø© Ø°Ø§Øª Ø±ÙˆØ§Ø¨Ø· Ø£ÙŠÙˆÙ†ÙŠØ© Ù‚ÙˆÙŠØ©", "Ù…Ø§Ø¯Ø© ØªØ­ØªÙˆÙŠ Ø±ÙˆØ§Ø¨Ø· Ø¶Ø¹ÙŠÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª"], ans: 2 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", // Ø£ØµØ¨Ø­Øª Ø±Ù‚Ù… 2
            description: "Ø¹ØµØ¨ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„ÙˆØ·Ù†ÙŠØŒ ØºÙ†ÙŠØ© Ø¨Ø§Ù„Ø«Ø±ÙˆØ§Øª Ø§Ù„Ù†ÙØ·ÙŠØ© ÙˆØªÙØ¹Ø¯ Ù…Ø±ÙƒØ²Ù‹Ø§ ØµÙ†Ø§Ø¹ÙŠÙ‹Ø§ ÙˆØªØ¬Ø§Ø±ÙŠÙ‹Ø§ Ù…Ù‡Ù…Ù‹Ø§.",
            questions: [
                { q: "Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø¯Ø© Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØŒ Ù…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ØŸ", opts: ["ØªÙ‚Ù„ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "Ù„Ø§ ØªØªØºÙŠØ± Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "ØªØ²Ø¯Ø§Ø¯ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "ÙŠØªÙˆÙ‚Ù Ø§Ù„ØªÙØ§Ø¹Ù„ ØªÙ…Ø§Ù…Ù‹Ø§"], ans: 2 },
                { q: "Ø¥Ø°Ø§ Ù„Ù… ØªÙÙˆØ²Ù† Ù…Ø¹Ø§Ø¯Ù„Ø© ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ØŒ ÙÙ…Ø§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ù…ØªØ±ØªØ¨Ø© Ø¹Ù„Ù‰ Ø°Ù„ÙƒØŸ", opts: ["Ø¹Ø¯Ù… Ø­ÙØ¸ Ø§Ù„ÙƒØªÙ„Ø©", "ØªØºÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯", "Ø²ÙŠØ§Ø¯Ø© Ø·Ø§Ù‚Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "ØªØ³Ø§Ø±Ø¹ Ø§Ù„ØªÙØ§Ø¹Ù„"], ans: 0 },
                { q: "ÙŠØ±ÙŠØ¯ Ø·Ø§Ù„Ø¨ ØªØ³Ø±ÙŠØ¹ ØªÙØ§Ø¹Ù„ ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù„Ù…ÙŠ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ØŸ", opts: ["ØªÙ‚Ù„ÙŠÙ„ Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø³Ø·Ø­", "Ø®ÙØ¶ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ø§Ù…Ù„ Ø­ÙØ§Ø²", "ØªÙ‚Ù„ÙŠÙ„ ØªØ±ÙƒÙŠØ² Ø§Ù„Ù…ØªÙØ§Ø¹Ù„Ø§Øª"], ans: 2 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©", // Ø£ØµØ¨Ø­Øª Ø±Ù‚Ù… 3
            description: "Ù…Ù‡ÙˆÙ‰ Ø£ÙØ¦Ø¯Ø© Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ†ØŒ ØªØ­ØªØ¶Ù† Ø§Ù„Ø­Ø±Ù…ÙŠÙ† Ø§Ù„Ø´Ø±ÙŠÙÙŠÙ† ÙˆØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù…Ù‚ Ø§Ù„Ø¯ÙŠÙ†ÙŠ ÙˆØ§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ø­Ø¶Ø§Ø±ÙŠ.",
            questions: [
                { q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø­ØµÙ„Ø© Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„Ù‰ Ø¬Ø³Ù… ØªØ³Ø§ÙˆÙŠ ØµÙØ±Ù‹Ø§ØŒ ÙÙ…Ø§ Ø­Ø§Ù„Ø© Ø­Ø±ÙƒØ© Ø§Ù„Ø¬Ø³Ù…ØŸ", opts: ["ÙŠØªØ­Ø±Ùƒ Ø¨ØªØ³Ø§Ø±Ø¹", "ÙŠØªÙˆÙ‚Ù Ù…Ø¨Ø§Ø´Ø±Ø©", "Ø³Ø§ÙƒÙ† Ø£Ùˆ ÙŠØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©", "ØªØªØºÙŠØ± Ø³Ø±Ø¹ØªÙ‡ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±"], ans: 2 },
                { q: "Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø¯Ø© ÙƒØªÙ„Ø© Ø¬Ø³Ù… Ù…Ø¹ Ø«Ø¨Ø§Øª Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„ÙŠÙ‡Ø§ØŒ Ù…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ ØªØ³Ø§Ø±Ø¹Ù‡ØŸ", opts: ["ÙŠØ²Ø¯Ø§Ø¯ Ø§Ù„ØªØ³Ø§Ø±Ø¹", "ÙŠÙ‚Ù„ Ø§Ù„ØªØ³Ø§Ø±Ø¹", "ÙŠØ¨Ù‚Ù‰ Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø«Ø§Ø¨ØªÙ‹Ø§", "ÙŠÙ†Ø¹Ø¯Ù… Ø§Ù„ØªØ³Ø§Ø±Ø¹"], ans: 1 },
                { q: "ÙŠØ±ÙŠØ¯ Ø³Ø§Ø¦Ù‚ ØªÙ‚Ù„ÙŠÙ„ ØªØ³Ø§Ø±Ø¹ Ù…Ø±ÙƒØ¨ØªÙ‡ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„ÙŠÙ‡Ø§. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙƒØªÙ„Ø©", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒØªÙ„Ø©", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‚ÙˆØ©", "ØªØºÙŠÙŠØ± Ø§Ù„Ø§ØªØ¬Ø§Ù‡"], ans: 1 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©",
            description: "Ø¨ÙˆØ§Ø¨Ø© ØªØ§Ø±ÙŠØ®ÙŠØ© ÙˆØ­Ø¶Ø§Ø±ÙŠØ©ØŒ ØªÙ…ØªØ§Ø² Ø¨Ù…ÙˆÙ‚Ø¹Ù‡Ø§ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ ÙˆØ¹Ù…Ù‚Ù‡Ø§ Ø§Ù„ØªØ±Ø§Ø«ÙŠ ÙˆØªÙ†ÙˆØ¹ Ù…ÙˆØ§Ø±Ø¯Ù‡Ø§ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©.",
            questions: [
                { q: "Ø¥Ø°Ø§ Ø²Ø§Ø¯Øª Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù…Ø¹ Ø«Ø¨Ø§Øª Ø§Ù„Ø¬Ù‡Ø¯ØŒ Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ù„Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", opts: ["ØªØ²Ø¯Ø§Ø¯", "ØªÙ‚Ù„", "ØªØ¨Ù‚Ù‰ Ø«Ø§Ø¨ØªØ©", "ØªÙ†Ø¹Ø¯Ù… Ù…Ø¨Ø§Ø´Ø±Ø©"], ans: 1 },
                { q: "Ø£ÙŠ ØªØºÙŠÙŠØ± ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø± ÙÙŠ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©ØŸ", opts: ["Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø©", "ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø¯", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù‡Ø¯", "Ø²ÙŠØ§Ø¯Ø© Ø·ÙˆÙ„ Ø§Ù„Ø³Ù„Ùƒ"], ans: 2 },
                { q: "ÙŠØ±ÙŠØ¯ Ø·Ø§Ù„Ø¨ Ø­Ù…Ø§ÙŠØ© Ø¯Ø§Ø¦Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù…Ù† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¨Ø§Ø­", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù‡Ø¯", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØµÙ‡Ø± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ", "Ø²ÙŠØ§Ø¯Ø© Ø·ÙˆÙ„ Ø§Ù„Ø³Ù„Ùƒ"], ans: 2 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©",
            description: "Ø¬Ù…Ø§Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© ÙˆØ±ÙˆØ­ Ø§Ù„Ø£ØµØ§Ù„Ø©ØŒ ØªØªÙ…ÙŠØ² Ø¨ØªØ¶Ø§Ø±ÙŠØ³Ù‡Ø§ Ø§Ù„Ø®Ù„Ø§Ø¨Ø© ÙˆØªØ±Ø§Ø«Ù‡Ø§ Ø§Ù„Ø«Ù‚Ø§ÙÙŠ Ø§Ù„Ø¹Ø±ÙŠÙ‚.",
            questions: [
                { q: "Ø£ÙŠ ØªØºÙŠÙŠØ± ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© Ù‚ÙˆØ© Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", opts: ["ØªÙ‚Ù„ÙŠÙ„ Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ù„ÙØ§Øª", "Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø³Ù„Ùƒ Ø±ÙÙŠØ¹ Ø¬Ø¯Ù‹Ø§"], ans: 2 },
                { q: "Ù„Ù…Ø§Ø°Ø§ ØªÙØ³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯ ÙƒÙ‚Ù„Ø¨ ÙÙŠ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", opts: ["Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ", "Ù„Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØªØ£Ø«Ø± Ø¨Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³", "Ù„Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ", "Ù„ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªÙŠØ§Ø±"], ans: 2 },
                { q: "ÙŠØ±ÙŠØ¯ Ø¹Ø§Ù„Ù… ØªÙ‚Ù„ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ ÙÙŠ ØªØ¬Ø±Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø©. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù„ÙØ§Øª", "Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "ØªÙ‚Ù„ÙŠÙ„ Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ù„Ø¨ Ø­Ø¯ÙŠØ¯ÙŠ"], ans: 2 }
            ]
        }
    ];

    /* ============ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ ============ */
    let currentLvl = 1;
    let activeRegionIdx = 0;
    let currentQIdx = 0;
    let tries = 3;

    function initAudio() {
        ['snd-correct', 'snd-wrong', 'snd-win', 'snd-click'].forEach(id => {
            const el = document.getElementById(id);
            if(el) { el.muted = true; el.play().then(()=> { el.pause(); el.currentTime=0; el.muted=false; }).catch(()=>{}); }
        });
    }
    function playSnd(id) { const a = document.getElementById(id); if(a) { a.currentTime=0; a.play().catch(()=>{}); } }

    window.onload = function() {
        const savedUser = localStorage.getItem('saudi_user_v9');
        if(savedUser) {
            document.getElementById('username').value = savedUser;
            currentLvl = parseInt(localStorage.getItem('saudi_lvl_v9') || '1');
            document.getElementById('login-overlay').classList.remove('active');
            document.getElementById('game-ui').style.display = 'flex';
            document.getElementById('name-display').innerText = "ğŸ‘¤ " + savedUser;
            updateMap();
        }
    };

function startGame() {
        // Ù†Ø³ØªØ®Ø¯Ù… .trim() Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©
        const user = document.getElementById('username').value.trim();

        // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø­Ù‚Ù„ Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹
        if(!user) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…");

        // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø·ÙˆÙ„ (Ø£Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† 8 Ø­Ø±ÙˆÙ)
        if(user.length < 8) {
            return alert("âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø§Ø³Ù… Ù…Ù† 8 Ø­Ø±ÙˆÙ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ (ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ).");
        }

        // 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø£Ø±Ù‚Ø§Ù… (ÙŠÙ…Ù†Ø¹ Ø£ÙŠ Ø±Ù‚Ù… Ù…Ù† 0 Ø¥Ù„Ù‰ 9)
        if (/\d/.test(user)) {
            return alert("âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨ÙƒØªØ§Ø¨Ø© Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„Ø§Ø³Ù….");
        }

        // --- Ø¥Ø°Ø§ Ù†Ø¬Ø­Øª Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©ØŒ ÙŠÙƒÙ…Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø·Ø¨ÙŠØ¹ÙŠØ§Ù‹ ---
        
        initAudio();
        localStorage.setItem('saudi_user_v9', user);
        localStorage.setItem('saudi_lvl_v9', '1');
        currentLvl = 1;
        document.getElementById('name-display').innerText = "ğŸ‘¤ " + user;
        document.getElementById('login-overlay').classList.remove('active');
        document.getElementById('game-ui').style.display = 'flex';
        updateMap();
        playSnd('snd-correct');
    }
    
    
    function updateMap() {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙÙˆØ²
        if (currentLvl > 5) {
            setTimeout(() => { playSnd('snd-win'); }, 300);
            const savedName = localStorage.getItem('saudi_user_v9') || document.getElementById('username').value;
            document.getElementById('winner-name-title').innerText = savedName.split(' ')[0];
            document.getElementById('winner-full-name').innerText = savedName;
            document.getElementById('win-overlay').classList.add('active');
            return;
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        const pct = ((currentLvl-1) / 5) * 100;
        document.getElementById('progress-fill').style.width = pct + '%';
        document.getElementById('progress-text').innerText = (currentLvl-1) + '/5';

        // Ø®Ø±ÙŠØ·Ø© ØªØ±Ø¨Ø· ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        // Ø§Ù„ØªØ±ØªÙŠØ¨: 0:ÙˆØ³Ø·Ù‰(btn1), 1:Ø´Ø±Ù‚ÙŠØ©(btn3), 2:ØºØ±Ø¨ÙŠØ©(btn2), 3:Ø´Ù…Ø§Ù„ÙŠØ©(btn4), 4:Ø¬Ù†ÙˆØ¨ÙŠØ©(btn5)
        const levelToBtnId = ['btn-1', 'btn-3', 'btn-2', 'btn-4', 'btn-5'];

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        regions.forEach((region, idx) => {
            const btnId = levelToBtnId[idx];
            const btn = document.getElementById(btnId);
            const levelNum = idx + 1; // Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© (1, 2, 3...)
            
            btn.className = 'region-btn';
            btn.innerHTML = '';
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            const label = `<span class="region-label">${region.name}</span>`;

            if(levelNum < currentLvl) {
                // Ù…Ø±Ø­Ù„Ø© Ù…Ù†Ø¬Ø²Ø©
                btn.classList.add('completed');
                btn.innerHTML = '<i class="fas fa-map-marker-alt"></i>' + label;
            } else if(levelNum === currentLvl) {
                // Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                btn.classList.add('active');
                btn.innerHTML = '<i class="fas fa-map-marker-alt"></i>' + label;
            } else {
                // Ù…Ø±Ø­Ù„Ø© Ù…Ù‚ÙÙ„Ø©
                btn.classList.add('locked');
                btn.innerHTML = '<i class="fas fa-lock"></i>' + label;
            }
        });
    }
    function handleClick(idx) {
        
        const reqLvl = idx + 1;
        const btn = document.getElementById('btn-' + (idx+1)); // approximate ID matching

        if(reqLvl < currentLvl) {
            showMessage("âœ… ØªÙ… Ø¥Ù†Ø¬Ø§Ø² Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©", "#10b981");
        } else if (reqLvl > currentLvl) {
            showMessage("ğŸ”’ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ù‚ÙÙˆÙ„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ØŒ Ø£ÙƒÙ…Ù„ÙŠ Ù…Ø§ Ù‚Ø¨Ù„Ù‡Ø§", "#64748b");
            btn.classList.add('shake'); setTimeout(()=>btn.classList.remove('shake'), 400);
            playSnd('snd-wrong');
        } else {
            // Play current level
            showMessage("", "");
            playSnd('snd-click');
            startRegionQuiz(idx);
        }
    }

    function showMessage(txt, col) {
        const m = document.getElementById('msg-box');
        m.innerText = txt; m.style.color = col;
    }

    function startRegionQuiz(idx) {
        activeRegionIdx = idx;
        currentQIdx = 0;
        tries = 3;
        loadQuestion();
        document.getElementById('quiz-overlay').classList.add('active');
    }

    function loadQuestion() {
        const rData = regions[activeRegionIdx];
        const qData = rData.questions[currentQIdx];
        
        document.getElementById('quiz-title').innerText = rData.name;
        document.getElementById('q-progress').innerText = `Ø³Ø¤Ø§Ù„ ${currentQIdx+1} Ù…Ù† 3`;
        document.getElementById('quiz-progress-fill').style.width = ((currentQIdx)/3)*100 + '%';
        document.getElementById('quiz-question').innerText = qData.q;
        
        document.getElementById('hearts').innerText = 'â¤'.repeat(tries);
        document.getElementById('quiz-feedback').innerText = '';
        document.getElementById('quiz-feedback').className = 'quiz-feedback';

        const div = document.getElementById('quiz-options');
        div.innerHTML = '';
        qData.opts.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'btn btn-option';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i, btn);
            div.appendChild(btn);
        });
    }

    function checkAnswer(ansIdx, btn) {
        const correct = regions[activeRegionIdx].questions[currentQIdx].ans;
        document.querySelectorAll('.btn-option').forEach(b => b.disabled=true);

        if(ansIdx === correct) {
            playSnd('snd-correct');
            btn.classList.add('correct');
            document.getElementById('quiz-feedback').innerText = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†ØªÙ ğŸ‰";
            document.getElementById('quiz-feedback').classList.add('success');
            
            setTimeout(() => {
                if(currentQIdx < 2) {
                    currentQIdx++;
                    loadQuestion();
                } else {
                    // Level Completed -> Show Info Overlay
                    document.getElementById('quiz-overlay').classList.remove('active');
                    showInfoOverlay();
                }
            }, 1000);
        } else {
            playSnd('snd-wrong');
            tries--;
            document.getElementById('hearts').innerText = 'â¤'.repeat(tries);
            btn.classList.add('wrong');
            document.getElementById('quiz-feedback').innerText = "Ø®Ø·Ø£.. Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
            document.getElementById('quiz-feedback').classList.add('error');
            
            setTimeout(() => {
                if(tries > 0) {
                    document.getElementById('quiz-feedback').innerText = '';
                    document.getElementById('quiz-feedback').className = 'quiz-feedback';
                    document.querySelectorAll('.btn-option').forEach(b => {
                        b.disabled = false; b.classList.remove('wrong');
                    });
                } else {
                    alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª!");
                    document.getElementById('quiz-overlay').classList.remove('active');
                }
            }, 1000);
        }
    }
function showInfoOverlay() {
    const rData = regions[activeRegionIdx];
    // Ù…Ù„Ø¡ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‡Ù†Ø¦Ø©
    document.getElementById('congrats-title').innerText = `Ø±Ø§Ø¦Ø¹ ! Ù„Ù‚Ø¯ Ø§Ø¬ØªØ²ØªÙ ${rData.name} Ø¨Ù†Ø¬Ø§Ø­ `;
    // Ù…Ù„Ø¡ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£ØµÙ„ÙŠ
    document.getElementById('info-title').innerText = rData.name;
    document.getElementById('info-desc').innerText = rData.description;
    document.getElementById('info-overlay').classList.add('active');
    playSnd('snd-correct'); // Sound for info
}
    function closeInfoAndProceed() {
        document.getElementById('info-overlay').classList.remove('active');
        
        // Save progress
        if(activeRegionIdx + 1 === currentLvl) {
            currentLvl++;
            localStorage.setItem('saudi_lvl_v9', currentLvl);
        }
        
        updateMap();

        // Check Win
        if(currentLvl > 5) {
            setTimeout(() => {
                playSnd('snd-win');
                document.getElementById('win-overlay').classList.add('active');
            }, 500);
        }
    }

    function resetGame() {
        localStorage.clear();
        location.reload();
    }

    function resetGame() {
    localStorage.clear();
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¶Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙˆØªÙØ±ÙŠØº Ø§Ù„ÙƒØ§Ø´
    window.location.href = window.location.href;
}

</script>

</body>
</html>