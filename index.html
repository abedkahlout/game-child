<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ 2030</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* ============ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ============ */
        :root {
            --primary: #006C35;
            --primary-light: #10b981;
            --primary-dark: #004d26;
            --accent: #fbbf24;
            --accent-dark: #d97706;
            --secondary: #1e3a8a;
            --success: #10b981;
            --danger: #dc2626;
            --warning: #f59e0b;
            --muted: #64748b;
            --border: #e2e8f0;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-dark: #0f172a;
            --text-muted: #64748b;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
        }

        /* ============ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¹Ø§Ù… ============ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            color: var(--text-dark);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ============ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ============ */
        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ============ Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ ============ */
        .top-bar {
            background: var(--bg-white);
            border-bottom: 2px solid var(--border);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
            z-index: 100;
        }

        .badge {
            background: linear-gradient(135deg, #f0fdf4 0%, #dbeafe 100%);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            color: var(--primary);
            border: 2px solid var(--primary-light);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            box-shadow: var(--shadow-sm);
        }

        .badge-exit {
            background: #fee2e2;
            color: var(--danger);
            border-color: var(--danger);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .badge-exit:hover {
            background: #fecaca;
            transform: scale(1.05);
        }

        .badge-exit:active {
            transform: scale(0.95);
        }

        /* ============ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ============ */
        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 16px;
            overflow-y: auto;
        }

        /* ============ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø®Ø±ÙŠØ·Ø© ============ */
        .map-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1;
            background: var(--bg-white);
            border-radius: 24px;
            box-shadow: var(--shadow-xl);
            border: 4px solid #dbeafe;
            overflow: hidden;
            animation: slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .map-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* ============ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ù†Ø§Ø·Ù‚ ============ */
        .region-btn {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: var(--shadow-lg);
            z-index: 10;
            user-select: none;
        }

        @media (max-width: 600px) {
            .region-btn {
                width: 42px;
                height: 42px;
                font-size: 1.2rem;
            }
        }

        /* Ø­Ø§Ù„Ø© Ù…Ù‚ÙÙˆÙ„ */
        .region-btn.locked {
            background: rgba(100, 116, 139, 0.8);
            border-color: #94a3b8;
            color: #cbd5e1;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .region-btn.locked:hover {
            transform: none;
        }

        /* Ø­Ø§Ù„Ø© Ù†Ø´Ø· */
        .region-btn.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: var(--accent);
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        /* Ø­Ø§Ù„Ø© Ù…ÙƒØªÙ…Ù„ */
      /* 3. Ù…ÙƒØªÙ…Ù„ (Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯) */
        .region-btn.completed {
            background: var(--bg-white);
            border-color: #006C35; /* Ø¥Ø·Ø§Ø± Ø£Ø®Ø¶Ø± */
            color: rgb(153, 1, 1) !important; /* Ù„ÙˆÙ† Ø§Ù„Ø¯Ø¨ÙˆØ³ Ø£Ø­Ù…Ø± */
            opacity: 1; 
        }

        /* Ø¥Ø¶Ø§ÙØ© Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµØ­ Ø§Ù„ØµØºÙŠØ±Ø© ÙÙˆÙ‚ Ø§Ù„Ø²Ø± Ø§Ù„Ù…ÙƒØªÙ…Ù„ */
        .region-btn.completed::after {
          content: ''; /* Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹: Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Øµ Ù„Ù†Ø¶Ø¹ Ø§Ù„ØµÙˆØ±Ø© */
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;  /* Ø­Ø¬Ù… Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØµØºÙŠØ±Ø© */
            height: 20px;
            
            /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØ±Ø© */
            background-image: url("true.png"); 
            background-size: cover; /* Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ù„Ø£ Ø§Ù„Ø¥Ø·Ø§Ø± */
            background-position: center;
            background-color: white; /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ ØªØ­Øª Ø§Ù„ØµÙˆØ±Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆØ¶ÙˆØ­ */
            
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 20;
        }

        .shake { animation: shake 0.4s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .region-btn.completed:hover {
            background: #f0fdf4;
            transform: scale(1.1);
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‡Ø² */
        .shake {
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Ø¥Ø¶Ø§ÙØ© Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ù… Ø£Ø³ÙÙ„ Ø§Ù„Ø²Ø± Ù„Ù„Ø¬ÙˆØ§Ù„ */
        .region-label {
            position: absolute;
            top: 110%; /* Ø£Ø³ÙÙ„ Ø§Ù„Ø²Ø± Ù…Ø¨Ø§Ø´Ø±Ø© */
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: bold;
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            color: #333;
            pointer-events: none; /* Ø­ØªÙ‰ Ù„Ø§ ÙŠØ¹ÙŠÙ‚ Ø§Ù„Ø¶ØºØ· */
            opacity: 0; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            transition: opacity 0.3s;
            z-index: 11;
        }

        /* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø§Ø³Ù… Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø´Ø§Ø· Ø£Ùˆ Ø§Ù„Ù„Ù…Ø³ */
        .region-btn:active .region-label, 
        .region-btn:hover .region-label,
        .region-btn.active .region-label {
            opacity: 1;
        }

        /* Ù„Ù„Ø¬ÙˆØ§Ù„: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù„Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù†Ø´Ø·Ø© ÙˆØ§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹ */
        @media (hover: none) {
            .region-btn.active .region-label,
            .region-btn.completed .region-label {
                opacity: 1;
            }
        }

        /* ============ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ============ */
        .progress-container {
            width: 100%;
            max-width: 600px;
            margin-top: 24px;
            background: var(--bg-white);
            padding: 16px;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--border);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-muted);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* ============ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ============ */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 16px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .overlay.active {
            display: flex;
        }

        .popup-box {
            background: var(--bg-white);
            border-radius: 24px;
            padding: 24px;
            max-width: 450px;
            width: 100%;
            box-shadow: var(--shadow-xl);
            animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* ============ Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ============ */
        .login-icon {
            font-size: 3.5rem;
            margin-bottom: 16px;
        }

        .login-title {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .login-subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .input-field {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-family: 'Cairo', sans-serif;
            font-size: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            margin-bottom: 16px;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 108, 53, 0.1);
        }

        /* ============ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ============ */
        .btn {
            width: 100%;
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            font-family: 'Cairo', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-option {
            background: var(--bg-light);
            border: 2px solid var(--border);
            color: var(--text-dark);
            text-align: right;
            margin: 8px 0;
            padding: 12px 16px;
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .btn-option:hover {
            background: var(--border);
            border-color: var(--primary);
        }

        .btn-option:active {
            background: var(--primary-light);
            border-color: var(--primary);
            color: white;
        }

        .btn-option.correct {
            background: #dcfce7;
            border-color: var(--success);
            color: var(--success);
        }

        .btn-option.wrong {
            background: #fee2e2;
            border-color: var(--danger);
            color: var(--danger);
        }

        /* ============ Ø±Ø£Ø³ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ============ */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
        }

        .quiz-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .hearts {
            font-size: 1.2rem;
            color: red;
            letter-spacing: 4px;
        }

        .quiz-progress {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
            margin: 20px 0;
            line-height: 1.6;
        }

        .quiz-feedback {
            height: 28px;
            font-weight: 700;
            font-size: 1rem;
            margin-top: 12px;
            text-align: center;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quiz-feedback.success {
            background: #dcfce7;
            color: var(--success);
        }

        .quiz-feedback.error {
            background: #fee2e2;
            color: var(--danger);
        }

        /* ============ Ù†Ø§ÙØ°Ø© Ø§Ù„ÙÙˆØ² ============ */
        .win-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            animation: bounce 0.6s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .win-title {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .win-message {
            font-size: 1.1rem;
            color: var(--text-muted);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        /* ============ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© ============ */
        .message-box {
            margin-top: 16px;
            text-align: center;
            font-weight: 700;
            font-size: 0.95rem;
            height: 24px;
            color: var(--primary);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ ============ */
        @media (max-width: 768px) {
            .top-bar {
                padding: 10px 12px;
            }

            .badge {
                font-size: 0.85rem;
                padding: 6px 12px;
            }

            .game-area {
                padding: 12px;
            }

            .map-container {
                border-radius: 16px;
                border-width: 3px;
            }

            .popup-box {
                padding: 20px;
                border-radius: 20px;
            }

            .login-title {
                font-size: 1.5rem;
            }

            .quiz-question {
                font-size: 1rem;
            }

            .btn {
                padding: 12px 16px;
                font-size: 1rem;
            }
        }

        /* ============ ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© ============ */
        .glow {
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                filter: drop-shadow(0 0 5px rgba(16, 185, 129, 0.5));
            }
            50% {
                filter: drop-shadow(0 0 15px rgba(16, 185, 129, 0.8));
            }
        }

        /* ============ ØªÙ…Ø±ÙŠØ± Ø³Ù„Ø³ ============ */
        * {
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        button {
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø²Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
        .region-btn {
            position: absolute;
            width: 50px; height: 50px; /* Ø­Ø¬Ù… Ø«Ø§Ø¨Øª Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid white;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem; /* Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: var(--shadow-lg);
            z-index: 10;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 600px) {
            .region-btn { width: 40px; height: 40px; font-size: 1.1rem; }
        }

        /* 1. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù‚ÙÙˆÙ„ */
        .region-btn.locked {
            background: #94a3b8; /* Ø±Ù…Ø§Ø¯ÙŠ */
            border-color: #cbd5e1;
            color: #e2e8f0;
        }
        
        /* 2. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Ø´Ø· (Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ) */
        .region-btn.active {
            background: #ffffff; /* Ø£Ø®Ø¶Ø± Ø§Ù„Ù‡ÙˆÙŠØ© */
            color: #b30000;
            font-size: 28px;
            border-color: #fbbe2449; /* Ø¥Ø·Ø§Ø± Ø°Ù‡Ø¨ÙŠ */
            animation: pulse 2s infinite;
        }

        /* 3. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…ÙƒØªÙ…Ù„ */
        .region-btn.completed {
            background: #fff;
            color: #006C35;
            border-color: #006C35;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="top-bar">
        <div class="badge" id="name-display">ğŸ‘¤ ...</div>
        <div class="badge badge-exit" onclick="resetGame()">Ø®Ø±ÙˆØ¬</div>
    </div>

    <div class="game-area" id="game-ui" style="display: none;">
        <div class="map-container">
            <img src="map3.png" alt="Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" class="map-image">
            
            <div class="region-btn btn-north locked" id="btn-4" onclick="handleClick(3)" style="top: 12%; left: 28%;">
                <span class="region-label">Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</span>
            </div>
            <div class="region-btn btn-west locked" id="btn-2" onclick="handleClick(1)" style="top: 42%; left: 34%;">
                <span class="region-label">Ø§Ù„ØºØ±Ø¨ÙŠØ©</span>
            </div>
            <div class="region-btn btn-central locked" id="btn-1" onclick="handleClick(0)" style="top: 38%; left: 50%;">
                <span class="region-label">Ø§Ù„ÙˆØ³Ø·Ù‰</span>
            </div>
            <div class="region-btn btn-east locked" id="btn-3" onclick="handleClick(2)" style="top: 23%; left: 56%;">
                <span class="region-label">Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</span>
            </div>
            <div class="region-btn btn-south locked" id="btn-5" onclick="handleClick(4)" style="top: 59%; left: 64%;">
                <span class="region-label">Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©</span>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-label">
                <span id="progress-text">5/5</span>
                <span>Ø§Ù„ØªÙ‚Ø¯Ù…</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 20%;"></div>
            </div>
        </div>

        <div class="message-box" id="msg-box"></div>
    </div>
</div>

<div id="login-overlay" class="overlay active">
    <div class="popup-box">
        <div style="text-align: center;">
            <div class="login-icon">ğŸ‡¸ğŸ‡¦</div>
            <h2 class="login-title">Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ 2030</h2>
            <p class="login-subtitle">Ø±Ø­Ù„Ø© Ø§Ø³ØªÙƒØ´Ø§ÙÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ø¬ÙˆØ§Ù„</p>
            <input type="text" id="username" class="input-field" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…ÙƒÙ..." onkeypress="if(event.key==='Enter') startGame()">
            <button class="btn btn-primary" onclick="startGame()">Ø§Ù†Ø·Ù„Ø§Ù‚ ğŸš€</button>
        </div>
    </div>
</div>

<div id="quiz-overlay" class="overlay">
    <div class="popup-box">
        <div class="quiz-header">
            <span class="hearts" id="hearts">â¤â¤â¤</span>
            <span class="quiz-title" id="quiz-title">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</span>
        </div>
        <div class="quiz-progress" id="q-progress">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 3</div>
        <div class="progress-bar">
            <div class="progress-fill" id="quiz-progress-fill" style="width: 33%;"></div>
        </div>
        <h3 class="quiz-question" id="quiz-question">Ø§Ù„Ø³Ø¤Ø§Ù„ØŸ</h3>
        <div id="quiz-options"></div>
        <div class="quiz-feedback" id="quiz-feedback"></div>
    </div>
</div>

<div id="win-overlay" class="overlay">
    <div class="popup-box" style="text-align: center;">
        <div class="win-icon">ğŸ†</div>
        <h1 class="win-title">Ø£Ù„Ù Ù…Ø¨Ø±ÙˆÙƒ!</h1>
        <p class="win-message">Ø£ØªÙ…Ù…ØªÙ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø·Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙˆØ·Ù†ÙŠ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ø§Ù‡Ø±.</p>
        <button class="btn btn-primary" onclick="resetGame()">Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>
</div>

<audio id="snd-correct" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="snd-wrong" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="snd-win" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio>
<audio id="snd-click" src="https://www.soundjay.com/buttons/sounds/button-20.mp3"></audio>

<script>
    // ============ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ============
    const regions = [
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙˆØ³Ø·Ù‰",
            btnId: "btn-1",
            position: { top: "43%", left: "54%" },
            questions: [
                { q: "Ø¹Ù†Ø¯ Ø¥Ø°Ø§Ø¨Ø© Ù…Ø±ÙƒØ¨ Ø£ÙŠÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ù…Ø§Ø¡ Ø£ØµØ¨Ø­ Ù‚Ø§Ø¯Ø±Ù‹Ø§ Ø¹Ù„Ù‰ ØªÙˆØµÙŠÙ„ Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ. Ù…Ø§ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ø£Ø¯Ù‚ Ù„Ø°Ù„ÙƒØŸ", opts: ["ØªÙƒÙˆÙ‘Ù† Ø£ÙŠÙˆÙ†Ø§Øª Ø­Ø±Ø© Ø§Ù„Ø­Ø±ÙƒØ©", "ØªØ­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø±ÙƒØ¨ Ø¥Ù„Ù‰ Ø¬Ø²ÙŠØ¦Ø§Øª Ù…ØªØ¹Ø§Ø¯Ù„Ø©", "Ø¶Ø¹Ù Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ³Ø§Ù‡Ù…ÙŠØ©", "Ø§Ø±ØªÙØ§Ø¹ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„ÙˆÙ„"], ans: 0 },
                { q: "Ø¥Ø°Ø§ Ø²Ø§Ø¯Øª Ù‚ÙˆØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© ÙÙŠ Ù…Ø§Ø¯Ø© Ù…Ø§ØŒ ÙÙ…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø© Ø§Ù†ØµÙ‡Ø§Ø±Ù‡Ø§ØŸ", opts: ["Ù„Ø§ ØªØªØºÙŠØ± Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†ØµÙ‡Ø§Ø±", "ØªÙ†Ø®ÙØ¶ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†ØµÙ‡Ø§Ø±", "ØªØªØ­ÙˆÙ„ Ø§Ù„Ù…Ø§Ø¯Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ ØºØ§Ø²", "ØªØ²Ø¯Ø§Ø¯ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù†ØµÙ‡Ø§Ø±"], ans: 3 },
                { q: "ÙŠØ±ÙŠØ¯ Ø¹Ø§Ù„Ù… Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ØµÙ†Ø§Ø¹Ø© Ø¬Ø³Ù… ØµÙ„Ø¨ ÙŠØªØ­Ù…Ù„ Ø¯Ø±Ø¬Ø§Øª Ø­Ø±Ø§Ø±Ø© Ø¹Ø§Ù„ÙŠØ©. Ø£ÙŠ Ø§Ø®ØªÙŠØ§Ø± Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["Ù…Ø§Ø¯Ø© Ø¬Ø²ÙŠØ¦ÙŠØ© Ø¶Ø¹ÙŠÙØ© Ø§Ù„ØªØ±Ø§Ø¨Ø·", "Ù…Ø§Ø¯Ø© ØºÙŠØ± Ù…Ø³ØªÙ‚Ø±Ø© ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠÙ‹Ø§", "Ù…Ø§Ø¯Ø© Ø°Ø§Øª Ø±ÙˆØ§Ø¨Ø· Ø£ÙŠÙˆÙ†ÙŠØ© Ù‚ÙˆÙŠØ©", "Ù…Ø§Ø¯Ø© ØªØ­ØªÙˆÙŠ Ø±ÙˆØ§Ø¨Ø· Ø¶Ø¹ÙŠÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª"], ans: 2 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©",
            btnId: "btn-2",
            position: { top: "42%", left: "34%" },
            questions: [
                { q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø­ØµÙ„Ø© Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„Ù‰ Ø¬Ø³Ù… ØªØ³Ø§ÙˆÙŠ ØµÙØ±Ù‹Ø§ØŒ ÙÙ…Ø§ Ø­Ø§Ù„Ø© Ø­Ø±ÙƒØ© Ø§Ù„Ø¬Ø³Ù…ØŸ", opts: ["ÙŠØªØ­Ø±Ùƒ Ø¨ØªØ³Ø§Ø±Ø¹", "ÙŠØªÙˆÙ‚Ù Ù…Ø¨Ø§Ø´Ø±Ø©", "Ø³Ø§ÙƒÙ† Ø£Ùˆ ÙŠØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©", "ØªØªØºÙŠØ± Ø³Ø±Ø¹ØªÙ‡ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±"], ans: 2 },
                { q: "Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø¯Ø© ÙƒØªÙ„Ø© Ø¬Ø³Ù… Ù…Ø¹ Ø«Ø¨Ø§Øª Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„ÙŠÙ‡ØŒ Ù…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ ØªØ³Ø§Ø±Ø¹Ù‡ØŸ", opts: ["ÙŠØ²Ø¯Ø§Ø¯ Ø§Ù„ØªØ³Ø§Ø±Ø¹", "ÙŠÙ‚Ù„ Ø§Ù„ØªØ³Ø§Ø±Ø¹", "ÙŠØ¨Ù‚Ù‰ Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø«Ø§Ø¨ØªÙ‹Ø§", "ÙŠÙ†Ø¹Ø¯Ù… Ø§Ù„ØªØ³Ø§Ø±Ø¹"], ans: 1 },
                { q: "ÙŠØ±ÙŠØ¯ Ø³Ø§Ø¦Ù‚ ØªÙ‚Ù„ÙŠÙ„ ØªØ³Ø§Ø±Ø¹ Ù…Ø±ÙƒØ¨ØªÙ‡ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ø¹Ù„ÙŠÙ‡Ø§. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙƒØªÙ„Ø©", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒØªÙ„Ø©", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‚ÙˆØ©", "ØªØºÙŠÙŠØ± Ø§Ù„Ø§ØªØ¬Ø§Ù‡"], ans: 1 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©",
            btnId: "btn-3",
            position: { top: "52%", left: "74%" },
            questions: [
                { q: "Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø¯Ø© Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØŒ Ù…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ØŸ", opts: ["ØªÙ‚Ù„ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "Ù„Ø§ ØªØªØºÙŠØ± Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "ØªØ²Ø¯Ø§Ø¯ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "ÙŠØªÙˆÙ‚Ù Ø§Ù„ØªÙØ§Ø¹Ù„ ØªÙ…Ø§Ù…Ù‹Ø§"], ans: 2 },
                { q: "Ø¥Ø°Ø§ Ù„Ù… ØªÙÙˆØ²Ù† Ù…Ø¹Ø§Ø¯Ù„Ø© ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ØŒ ÙÙ…Ø§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ù…ØªØ±ØªØ¨Ø© Ø¹Ù„Ù‰ Ø°Ù„ÙƒØŸ", opts: ["Ø¹Ø¯Ù… Ø­ÙØ¸ Ø§Ù„ÙƒØªÙ„Ø©", "ØªØºÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯", "Ø²ÙŠØ§Ø¯Ø© Ø·Ø§Ù‚Ø© Ø§Ù„ØªÙØ§Ø¹Ù„", "ØªØ³Ø§Ø±Ø¹ Ø§Ù„ØªÙØ§Ø¹Ù„"], ans: 0 },
                { q: "ÙŠØ±ÙŠØ¯ Ø·Ø§Ù„Ø¨ ØªØ³Ø±ÙŠØ¹ ØªÙØ§Ø¹Ù„ ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù„Ù…ÙŠ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ØŸ", opts: ["ØªÙ‚Ù„ÙŠÙ„ Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø³Ø·Ø­", "Ø®ÙØ¶ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ø§Ù…Ù„ Ø­ÙØ§Ø²", "ØªÙ‚Ù„ÙŠÙ„ ØªØ±ÙƒÙŠØ² Ø§Ù„Ù…ØªÙØ§Ø¹Ù„Ø§Øª"], ans: 2 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©",
            btnId: "btn-4",
            position: { top: "25%", left: "30%" },
            questions: [
                { q: "Ø¥Ø°Ø§ Ø²Ø§Ø¯Øª Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù…Ø¹ Ø«Ø¨Ø§Øª Ø§Ù„Ø¬Ù‡Ø¯ØŒ Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ù„Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", opts: ["ØªØ²Ø¯Ø§Ø¯", "ØªÙ‚Ù„", "ØªØ¨Ù‚Ù‰ Ø«Ø§Ø¨ØªØ©", "ØªÙ†Ø¹Ø¯Ù… Ù…Ø¨Ø§Ø´Ø±Ø©"], ans: 1 },
                { q: "Ø£ÙŠ ØªØºÙŠÙŠØ± ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø± ÙÙŠ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©ØŸ", opts: ["Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø©", "ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø¯", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù‡Ø¯", "Ø²ÙŠØ§Ø¯Ø© Ø·ÙˆÙ„ Ø§Ù„Ø³Ù„Ùƒ"], ans: 2 },
                { q: "ÙŠØ±ÙŠØ¯ Ø·Ø§Ù„Ø¨ Ø­Ù…Ø§ÙŠØ© Ø¯Ø§Ø¦Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù…Ù† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¨Ø§Ø­", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù‡Ø¯", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØµÙ‡Ø± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ", "Ø²ÙŠØ§Ø¯Ø© Ø·ÙˆÙ„ Ø§Ù„Ø³Ù„Ùƒ"], ans: 2 }
            ]
        },
        {
            name: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©",
            btnId: "btn-5",
            position: { top: "65%", left: "45%" },
            questions: [
                { q: "Ø£ÙŠ ØªØºÙŠÙŠØ± ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© Ù‚ÙˆØ© Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", opts: ["ØªÙ‚Ù„ÙŠÙ„ Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ù„ÙØ§Øª", "Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø³Ù„Ùƒ Ø±ÙÙŠØ¹ Ø¬Ø¯Ù‹Ø§"], ans: 2 },
                { q: "Ù„Ù…Ø§Ø°Ø§ ØªÙØ³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯ ÙƒÙ‚Ù„Ø¨ ÙÙŠ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", opts: ["Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ", "Ù„Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØªØ£Ø«Ø± Ø¨Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³", "Ù„Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ", "Ù„ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªÙŠØ§Ø±"], ans: 2 },
                { q: "ÙŠØ±ÙŠØ¯ Ø¹Ø§Ù„Ù… ØªÙ‚Ù„ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…ØºÙ†Ø§Ø·ÙŠØ³ÙŠ ÙÙŠ ØªØ¬Ø±Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø©. Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø¹Ù„Ù…ÙŠÙ‹Ø§ØŸ", opts: ["Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù„ÙØ§Øª", "Ø²ÙŠØ§Ø¯Ø© Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "ØªÙ‚Ù„ÙŠÙ„ Ø´Ø¯Ø© Ø§Ù„ØªÙŠØ§Ø±", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ù„Ø¨ Ø­Ø¯ÙŠØ¯ÙŠ"], ans: 2 }
            ]
        }
    ];

    // ============ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ============
    let currentLvl = 1;
    let activeRegionIdx = 0;
    let currentQIdx = 0;
    let tries = 3;

    // ============ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙˆØª ============
    function initAudio() {
        const audioIds = ['snd-correct', 'snd-wrong', 'snd-win', 'snd-click'];
        audioIds.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.muted = true;
                el.play().then(() => {
                    el.pause();
                    el.currentTime = 0;
                    el.muted = false;
                }).catch(err => console.log("Audio pending:", err));
            }
        });
    }

    // ============ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª ============
    function playSnd(type) {
        const ids = { 'win': 'snd-win', 'correct': 'snd-correct', 'wrong': 'snd-wrong', 'click': 'snd-click' };
        const audio = document.getElementById(ids[type]);
        if (audio) {
            audio.currentTime = 0;
            audio.play().catch(error => console.log("Sound error: ", error));
        }
    }

    // ============ ØªØ­Ù…ÙŠÙ„ Ù…Ù† localStorage ============
    window.onload = function () {
        const saved = localStorage.getItem('saudi_mobile_v7');
        const savedLevel = localStorage.getItem('saudi_lvl_v7');
        if (saved) {
            document.getElementById('username').value = saved;
            currentLvl = parseInt(savedLevel || '1');
            document.getElementById('login-overlay').classList.remove('active');
            document.getElementById('game-ui').style.display = 'flex';
            updateMap();
        }
    };

    // ============ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ============
    function startGame() {
        const user = document.getElementById('username').value;
        if (!user) {
            alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…");
            return;
        }

        initAudio();
        localStorage.setItem('saudi_mobile_v7', user);
        localStorage.setItem('saudi_lvl_v7', '1');
        currentLvl = 1;

        document.getElementById('name-display').innerText = "ğŸ‘¤ " + user;
        document.getElementById('login-overlay').classList.remove('active');
        document.getElementById('game-ui').style.display = 'flex';
        updateMap();
        playSnd('correct');
    }

    // ============ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø±ÙŠØ·Ø© ============
    function updateMap() {
        if (currentLvl > 5) {
            playSnd('win');
            document.getElementById('win-overlay').classList.add('active');
            return;
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        const progress = (currentLvl / 5) * 100;
        document.getElementById('progress-fill').style.width = progress + '%';
        document.getElementById('progress-text').innerText = currentLvl + '/5';

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
       // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        for (let i = 1; i <= 5; i++) {
            const btn = document.getElementById('btn-' + i);
            btn.classList.remove('active', 'completed', 'locked');
            
            // Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
            const regionNameSpan = '<span class="region-label">' + getRegionName(i) + '</span>';

            if (i < currentLvl) {
                // âœ… Ø­Ø§Ù„Ø© Ù…ÙƒØªÙ…Ù„ (Ø£ÙŠÙ‚ÙˆÙ†Ø© ØµØ­ Ø¯Ø§Ø¦Ø±ÙŠØ©)
                btn.classList.add('completed');
                btn.innerHTML = '<i class="fas fa-map-marker-alt"></i>' + regionNameSpan;
            } else if (i === currentLvl) {
                // ğŸ“ Ø­Ø§Ù„Ø© Ù†Ø´Ø· (Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯Ø¨ÙˆØ³ Ø®Ø±ÙŠØ·Ø©)
                btn.classList.add('active');
                btn.innerHTML = '<i class="fas fa-map-marker-alt"></i>' + regionNameSpan;
            } else {
                // ğŸ”’ Ø­Ø§Ù„Ø© Ù…Ù‚ÙÙˆÙ„ (Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù‚ÙÙ„)
                btn.classList.add('locked');
                btn.innerHTML = '<i class="fas fa-lock"></i>' + regionNameSpan;
            }
        
        }
    }

    function getRegionName(index) {
        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ù€ ID:
        // btn-1: Ø§Ù„ÙˆØ³Ø·Ù‰ (Index 0)
        // btn-2: Ø§Ù„ØºØ±Ø¨ÙŠØ© (Index 1)
        // btn-3: Ø§Ù„Ø´Ø±Ù‚ÙŠØ© (Index 2)
        // btn-4: Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© (Index 3)
        // btn-5: Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ© (Index 4)
        
        // Ù„ÙƒÙ† Ø§Ù„ØªØ±ØªÙŠØ¨ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙƒØ§Ù†:
        // btn-4 (Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©) -> index 3
        // btn-2 (Ø§Ù„ØºØ±Ø¨ÙŠØ©) -> index 1
        // btn-1 (Ø§Ù„ÙˆØ³Ø·Ù‰) -> index 0
        // btn-3 (Ø§Ù„Ø´Ø±Ù‚ÙŠØ©) -> index 2
        // btn-5 (Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©) -> index 4
        
        // Ø§Ù„Ø¯Ø§Ù„Ø© updateMap ØªØ³ØªØ®Ø¯Ù… i Ù…Ù† 1 Ø¥Ù„Ù‰ 5 Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† btn-i
        // btn-1 Ù‡Ùˆ regions[0] (Ø§Ù„ÙˆØ³Ø·Ù‰)
        // btn-2 Ù‡Ùˆ regions[1] (Ø§Ù„ØºØ±Ø¨ÙŠØ©)
        // btn-3 Ù‡Ùˆ regions[2] (Ø§Ù„Ø´Ø±Ù‚ÙŠØ©)
        // btn-4 Ù‡Ùˆ regions[3] (Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©)
        // btn-5 Ù‡Ùˆ regions[4] (Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©)
        
        // Ù„ÙƒÙ† Ø§Ù†ØªØ¨Ù‡: Ø§Ù„Ù…ØµÙÙˆÙØ© regions Ù…Ø±ØªØ¨Ø© ÙƒØ§Ù„ØªØ§Ù„ÙŠ:
        // 0: Ø§Ù„ÙˆØ³Ø·Ù‰
        // 1: Ø§Ù„ØºØ±Ø¨ÙŠØ©
        // 2: Ø§Ù„Ø´Ø±Ù‚ÙŠØ©
        // 3: Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©
        // 4: Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©
        
        // Ø¥Ø°Ø§Ù‹:
        if (index === 1) return regions[0].name; // Ø§Ù„ÙˆØ³Ø·Ù‰
        if (index === 2) return regions[1].name; // Ø§Ù„ØºØ±Ø¨ÙŠØ©
        if (index === 3) return regions[2].name; // Ø§Ù„Ø´Ø±Ù‚ÙŠØ©
        if (index === 4) return regions[3].name; // Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©
        if (index === 5) return regions[4].name; // Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©
        return "";
    }

    // ============ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù‚Ø± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ============
    function handleClick(idx) {
        const lvl = idx + 1;
        const msg = document.getElementById('msg-box');
        const btn = document.getElementById('btn-' + (idx + 1));

        if (lvl < currentLvl) {
            msg.innerText = "âœ… ØªÙ… Ø¥Ù†Ø¬Ø§Ø² Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©";
            msg.style.color = "#10b981";
        } else if (lvl > currentLvl) {
            msg.innerText = "ğŸ”’ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ù‚ÙÙˆÙ„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹";
            msg.style.color = "#64748b";
            btn.classList.add('shake');
            setTimeout(() => btn.classList.remove('shake'), 400);
            playSnd('wrong');
        } else {
            msg.innerText = "";
            playSnd('click');
            startRegionQuiz(idx);
        }
    }

    // ============ Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ============
    function startRegionQuiz(idx) {
        activeRegionIdx = idx;
        currentQIdx = 0;
        tries = 3;
        loadQuestion();
        document.getElementById('quiz-overlay').classList.add('active');
    }

    // ============ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ ============
    function loadQuestion() {
        const rData = regions[activeRegionIdx];
        const qData = rData.questions[currentQIdx];

        document.getElementById('quiz-title').innerText = rData.name;
        document.getElementById('q-progress').innerText = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQIdx + 1} Ù…Ù† ${rData.questions.length}`;

        const pct = ((currentQIdx + 1) / rData.questions.length) * 100;
        document.getElementById('quiz-progress-fill').style.width = pct + '%';

        document.getElementById('quiz-question').innerText = qData.q;
        document.getElementById('quiz-feedback').innerText = '';
        document.getElementById('quiz-feedback').className = 'quiz-feedback';
        document.getElementById('hearts').innerText = 'â¤'.repeat(tries);

        const div = document.getElementById('quiz-options');
        div.innerHTML = '';
        qData.opts.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'btn btn-option';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i, btn);
            div.appendChild(btn);
        });
    }

    // ============ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ============
    function checkAnswer(ansIdx, btn) {
        const correct = regions[activeRegionIdx].questions[currentQIdx].ans;
        document.querySelectorAll('.btn-option').forEach(b => b.disabled = true);

        if (ansIdx === correct) {
            playSnd('correct');
            btn.classList.add('correct');
            document.getElementById('quiz-feedback').innerText = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†ØªÙ ğŸ‰";
            document.getElementById('quiz-feedback').className = 'quiz-feedback success';

            setTimeout(() => {
                if (currentQIdx < 2) {
                    currentQIdx++;
                    loadQuestion();
                } else {
                    if (activeRegionIdx + 1 === currentLvl) {
                        currentLvl++;
                        localStorage.setItem('saudi_lvl_v7', currentLvl);
                    }
                    document.getElementById('quiz-overlay').classList.remove('active');
                    updateMap();
                    alert(`Ù…Ù…ØªØ§Ø²Ø©! Ø£ØªÙ…Ù…ØªÙ ${regions[activeRegionIdx].name} Ø¨Ù†Ø¬Ø§Ø­.`);
                }
            }, 1000);
        } else {
            playSnd('wrong');
            tries--;
            document.getElementById('hearts').innerText = 'â¤'.repeat(tries);
            btn.classList.add('wrong');
            document.getElementById('quiz-feedback').innerText = "Ø®Ø·Ø£! Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
            document.getElementById('quiz-feedback').className = 'quiz-feedback error';

            setTimeout(() => {
                if (tries > 0) {
                    document.getElementById('quiz-feedback').innerText = '';
                    document.getElementById('quiz-feedback').className = 'quiz-feedback';
                    document.querySelectorAll('.btn-option').forEach(b => {
                        b.disabled = false;
                        b.classList.remove('correct', 'wrong');
                    });
                } else {
                    alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª!");
                    document.getElementById('quiz-overlay').classList.remove('active');
                }
            }, 1000);
        }
    }

    // ============ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø© ============
    function resetGame() {
        localStorage.clear();
        location.reload();
    }
</script>

</body>
</html>